#!/usr/bin/env bash
# Get a list of the listening sockets
listening_sockets=$(lsof -i -P -n | grep LISTEN)

# Loop through the list of listening sockets
while read -r line; do
  # Extract the PID and process name
  pid=$(echo $line | awk '{print $2}')
  process_name=$(echo $line | awk '{print $1}')
  # Extract the listening port
  port=$(echo $line | awk '{print $9}' | cut -d':' -f2)

  # Print the results
  echo "Listening Port: $port"
  echo "PID: $pid"
  echo "Process Name: $process_name"
  echo ""
done <<< "$listening_sockets"

